<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Practical Session and Guided Learning</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/advanced-database-systems-2022/assets/css/0.styles.83f0f393.css" as="style"><link rel="preload" href="/advanced-database-systems-2022/assets/js/app.cd8f677f.js" as="script"><link rel="preload" href="/advanced-database-systems-2022/assets/js/2.e8c6d7ef.js" as="script"><link rel="preload" href="/advanced-database-systems-2022/assets/js/13.a85c1a2a.js" as="script"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/10.b0f393ab.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/11.b18cc5af.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/12.b5f0c938.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/14.aa66e465.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/15.fae4e792.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/16.b31105b3.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/17.03291a53.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/18.7a4272a1.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/19.a73a7084.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/20.8e326b6b.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/21.da72a5ce.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/22.ba16cce9.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/23.ce56e7c5.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/24.3ba98f78.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/25.caf496be.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/26.43ee80aa.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/27.41606f6a.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/28.efc7295e.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/29.91d45b54.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/3.7885ed36.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/30.ea869e8a.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/31.444bea41.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/32.acda10a5.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/33.24cdb704.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/34.96bb9f63.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/35.ef19626a.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/36.e662f09a.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/37.817e6d27.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/38.e5f57963.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/4.268bb457.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/5.0aff5690.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/6.b6251a91.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/7.43e13154.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/8.67e5e273.js"><link rel="prefetch" href="/advanced-database-systems-2022/assets/js/9.85f0ab95.js">
    <link rel="stylesheet" href="/advanced-database-systems-2022/assets/css/0.styles.83f0f393.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/advanced-database-systems-2022/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Assessment 1</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Overview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Week 1 - Introduction to NodeJS and MongoDB</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/advanced-database-systems-2022/sessions/week_1/lecture.html" class="sidebar-link">Lecture (Start Here)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/advanced-database-systems-2022/sessions/week_1/lecture.html#introduction-to-the-module" class="sidebar-link">Introduction to the module</a></li></ul></li><li><a href="/advanced-database-systems-2022/sessions/week_1/" aria-current="page" class="active sidebar-link">Practical Session and Guided Learning</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/advanced-database-systems-2022/sessions/week_1/#relational-database" class="sidebar-link">Relational Database</a></li><li class="sidebar-sub-header"><a href="/advanced-database-systems-2022/sessions/week_1/#nosql-databases" class="sidebar-link">NoSQL Databases</a></li><li class="sidebar-sub-header"><a href="/advanced-database-systems-2022/sessions/week_1/#mongodb" class="sidebar-link">MongoDB</a></li><li class="sidebar-sub-header"><a href="/advanced-database-systems-2022/sessions/week_1/#setting-up-a-development-environment" class="sidebar-link">Setting up a development environment</a></li><li class="sidebar-sub-header"><a href="/advanced-database-systems-2022/sessions/week_1/#installing-nodejs" class="sidebar-link">Installing NodeJS</a></li><li class="sidebar-sub-header"><a href="/advanced-database-systems-2022/sessions/week_1/#task-1" class="sidebar-link">Task 1</a></li><li class="sidebar-sub-header"><a href="/advanced-database-systems-2022/sessions/week_1/#sample-applications" class="sidebar-link">Sample Applications</a></li><li class="sidebar-sub-header"><a href="/advanced-database-systems-2022/sessions/week_1/#task-2-implement-the-sample-applications" class="sidebar-link">Task 2 Implement the Sample Applications</a></li><li class="sidebar-sub-header"><a href="/advanced-database-systems-2022/sessions/week_1/#guided-learning" class="sidebar-link">Guided Learning</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 2 - Exploring Node, Express and Templates</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 3 - No Sql data planning and Modelling</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 4  - Completing the MVC stack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 5 - Getting to Grips With the Assessment</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 6 - Thinking About Updating Data</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 7 - Data Modeling and Relationships</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="practical-session-and-guided-learning"><a href="#practical-session-and-guided-learning" class="header-anchor">#</a> Practical Session and Guided Learning</h1> <h2 id="relational-database"><a href="#relational-database" class="header-anchor">#</a> Relational Database</h2> <p>In your first year, you were introduced to the concept of relational databases. In a relational database data is stored tables. Conceptually, the data is represented much in the same way as a spreadsheet. For instance, a student table could something like this:</p> <table><thead><tr><th>#</th> <th>Student Name</th></tr></thead> <tbody><tr><td>1</td> <td>Joe Appleton</td></tr> <tr><td>2</td> <td>John Smith</td></tr></tbody></table> <blockquote><blockquote><p>A simple database table. The values that you can place into the student's table are governed by a schema, that you design first.</p></blockquote></blockquote> <table><thead><tr><th>Field</th> <th>Type</th> <th>Null</th> <th>Key</th></tr></thead> <tbody><tr><td>1</td> <td>int(11)</td> <td>NO</td> <td>PRI</td></tr> <tr><td>2</td> <td>text</td> <td>NO</td> <td></td></tr></tbody></table> <blockquote><blockquote><p>A simple database schema</p></blockquote></blockquote> <p>Relational database management systems (RDBMS), at the time of writing, are 50 years old. They present a very mature technology and are highly consistent. That is, any data written to the database is valid according to developer-defined constraints. In other words, an RDMS prioritises data integrity. We can conclude, if we are developing a system where data consistency and precision is vital then an RDBMS is the best choice. However, while an RDBMS will work for any application, managing schemas across multiple environments can be a, complex, time-consuming undertaking. Further to this, often data from several tables must be aggregated before it is suitable for a user facing view.</p> <h2 id="nosql-databases"><a href="#nosql-databases" class="header-anchor">#</a> NoSQL Databases</h2> <p>We have established that an RDBMS prioritises data consistency and integrity, at the cost of complexity and readability. NoSql (Non-relational databases), on the other hand, provide read and write simplicity. However, they do not comply the rigorous data consistency standards of their RDMS counterparts. While sacrificing data consistency may be unacceptable for an application monitoring financial transactions. For many applications, especially web applications, it is a not a major issue if data is slightly out of sync.</p> <p>As with their RDMS counterparts there are many different types of NoSQL databases, with the most popular being:</p> <ul><li>Document Stores</li> <li>Key-value stores</li> <li>Graph-based</li></ul> <p>In this module, we are going to be looking at the document store, MongoDB.</p> <h2 id="mongodb"><a href="#mongodb" class="header-anchor">#</a> MongoDB</h2> <p>According to its developer, <a href="https://www.mongodb.com/what-is-mongodb" target="_blank" rel="noopener noreferrer">MongoDB’s document model is simple for developers to learn and use, while still providing all the capabilities needed to meet the most complex requirements at any scale<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Instead of tables, data is stored in documents. Documents are constructed using flexible JSON-like documents. For instance, a student record could look like this:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
	<span class="token string">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5f688fb800bcd2661917a892&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token string">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;first&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Joe&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;last&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Appleton&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;age&quot;</span> <span class="token operator">:</span> <span class="token function">ISODate</span><span class="token punctuation">(</span><span class="token string">&quot;1982-12-21T00:00:00Z&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><blockquote><p>An example of a MongoDB object</p></blockquote></blockquote> <h2 id="setting-up-a-development-environment"><a href="#setting-up-a-development-environment" class="header-anchor">#</a> Setting up a development environment</h2> <p>It is most convenient to configure a local development environment. This process should be simple, as we need minimal dependencies to get going, just NodeJS and MongoDB. You will not be able to install MongoDB at University. However, you should certainly do this if you are using your own computer.</p> <p><strong>Mac Installation</strong></p> <ul><li><p>Install, the package manager, <a href="https://brew.sh/#install" target="_blank" rel="noopener noreferrer">HomeBrew<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Follow the instructions on the website, this is a useful tool to have</p></li> <li><p>From a terminal Window, run the following commands:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>  brew update
  brew tap mongodb/brew
  brew <span class="token function">install</span> mongodb-community@4.4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>You should now be able to start and stop Mongo using the following commands:</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>    brew services start mongodb-community@4.4
    brew services stop mongodb-community@4.4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>Next, if you type into a terminal window &quot;mongo&quot; you should access the MongoDB shell</p></li></ul> <p><strong>Windows Installation</strong></p> <ul><li>You will need to download and run the msi package from the <a href="https://www.mongodb.com/try/download/community" target="_blank" rel="noopener noreferrer">Mongo Downloads Section<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - ensure that you download community edition.</li> <li>You then need to proceed through each step of the wizard
<ul><li>Select complete installation</li> <li>Ensure that you install MONGO as a network service</li></ul></li> <li>Assuming you did not change the defaults, create the directory 'C:\Program Files\MongoDB\Server\4.4\data'</li> <li>You can now start the server by clicking &quot;C:\Program Files\MongoDB\Server\4.4\bin\mongod.exe&quot;</li> <li>Next, clicking &quot;C:\Program Files\MongoDB\Server\4.4\bin\mongo.exe&quot;&quot; should bring up the shell</li></ul> <p><strong>Setting up our Cloud Database (use this option to work from university)</strong></p> <p>Let's dive in and created a MongoDB Atlas account. This is a straight forward process:</p> <img src="https://joeappleton18.github.io/data-management-2021-notes/images/set-up-a-atlas-account.png"> <blockquote><blockquote><p>The first three steps in setting up a free Atlas Account.</p></blockquote></blockquote> <ul><li><a href="https://www.mongodb.com/cloud/atlas/register" target="_blank" rel="noopener noreferrer">Register a new account<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>On the next screen, you'll get the opportunity to set up a new project, name it &quot;dbwork&quot; and select JavaScript as the language choice.</li> <li>Select select a Free, shared, cluster.</li> <li>Finally, choose an AWS cloud provider and click &quot;Create Cluster&quot;</li></ul> <img src="https://joeappleton18.github.io/data-management-2021-notes/images/configuring-your-cluster.png"> <blockquote><blockquote><p>Configuring a cluster</p></blockquote></blockquote> <ul><li><p>Next, we need to follow through the steps to configure our database cluster</p> <ul><li>Under database access, set up an admin user and password</li> <li>Under network access, allow access from all IPs</li> <li>Finally clusters, click connect to cluster, click connect using NodeJS and grab the connection string</li></ul></li></ul> <h2 id="installing-nodejs"><a href="#installing-nodejs" class="header-anchor">#</a> Installing NodeJS</h2> <ul><li>Node is simple to install, simply visit the <a href="https://nodejs.org/en/download/" target="_blank" rel="noopener noreferrer">download<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Next, visit command line and run &quot;node -v&quot;, you should seem something along the lines of &quot;14.11.0&quot;</li></ul> <p>Here is hoping that went smoothly; if it did, we are now ready to proceed with our first node application.</p> <h2 id="task-1"><a href="#task-1" class="header-anchor">#</a> Task 1</h2> <p>Follow the instructions above to set up your own development environment. Further to the above installation steps, you may also want to install <a href="https://robomongo.org/" target="_blank" rel="noopener noreferrer">Robot 3T<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="sample-applications"><a href="#sample-applications" class="header-anchor">#</a> Sample Applications</h2> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>I don't advise that you just copy and past these code blocks in, you will not learn
anything. Instead, you should type the examples in and consider what each line
of code is doing.</p></div> <ul><li>First we need to create a folder where all of our practical work will live for this module, e.g. &quot;database-systems/&quot;. You'll want to place this folder under version control.</li> <li>Next, within your database-systems folder create a further folder called “week-1”</li> <li>Finally, point a terminal window/command prompt to your week-1 folder and run &quot;npm init -y&quot;.</li></ul> <h3 id="sample-application-1"><a href="#sample-application-1" class="header-anchor">#</a> Sample Application 1</h3> <ul><li>Let's make our first Node web application</li> <li>Within your week-1 folder create the file sample_1.js</li> <li>Type in the code below</li> <li>Run you application by pointing your IDEs (normally visual code) terminal to your week_1 folder and input the command <code>node sample_1.js</code></li> <li>Now visit your browser, and see what happens! You should see &quot;hello world&quot;. Next, take a look at your terminal, this is where your console.log() statements will be be output.</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;request&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> headers <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>headers<span class="token punctuation">)</span><span class="token punctuation">;</span>

  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><blockquote><blockquote><p>A simple Node Application</p></blockquote></blockquote> <p>Do not worry if the code above seems somewhat alien to you; much of it may be new. In short, we are setting up web server that is listening on local host port 8080. When a client connects, we simply return hello world.</p> <p>To achieve this, we first must pull in Node’s http module (l.1). Next, we create a new server instance (line 2). Finally, we tell the server to listen for incoming requests on port 8080 (l.14).</p> <p>Then we set up an HTTP request handler (l.4). When an HTTP request is received the function, which is the second argument passed into server.on(), is fired. Two objects are passed into this handler <code>function (res, req)</code>. As you can see we can use these objects to inspect the type of request (l.7 - 8) and write a response to the client (l.11).</p> <h3 id="sample-application-2"><a href="#sample-application-2" class="header-anchor">#</a> Sample Application 2</h3> <p>Let's try and take things a little further and use node to manipulate a mongo database.</p> <ul><li>In your <code>week_1</code> folder, create the file <code>sample_2.js</code>.</li> <li>Next, we need to install the official MongoDB Node.js driver within your <code>week_1</code> folder run the following command: <code>npm install mongodb --save</code>. Check your <code>package.json</code> file, you should see the mongo dependency in there.</li> <li>Finally construct the program below and run <code>node sample_2.js</code></li> <li>Visit, in your browser, <code>http://localhost:8080</code></li> <li>After execution. If you are working using a local instance of mongodb open up the mongo command shell (see above) and run the following commands:
<ul><li><code>use student</code></li> <li><code>db.students.find({})</code></li></ul></li> <li>If you are running a cloud version, click on &quot;databases (in the side bar) -&gt; view and monitoring -&gt; collections&quot;</li> <li>You should see a list of students in your database</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> MongoClient <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mongodb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// this will be something like &quot;mongodb+srv://test:test@cluster0.x08wt.mongodb.net/myFirstDatabase?retryWrites=true&amp;w=majority&quot; if you used the cloud db, or &quot;mongodb://localhost:27017&quot; if you use a local install;</span>
<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">&quot;your connection url&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> dbName <span class="token operator">=</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MongoClient</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span> useNewUrlParser<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> students <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token punctuation">{</span> first<span class="token operator">:</span> <span class="token string">&quot;joe&quot;</span><span class="token punctuation">,</span> last<span class="token operator">:</span> <span class="token string">&quot;appleton&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    dob<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">&quot;August 12, 1982&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token punctuation">{</span> first<span class="token operator">:</span> <span class="token string">&quot;bill&quot;</span><span class="token punctuation">,</span> last<span class="token operator">:</span> <span class="token string">&quot;smith&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    dob<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">&quot;August 12, 1982&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;request&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> db <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">db</span><span class="token punctuation">(</span>dbName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> collection <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&quot;students&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> collection<span class="token punctuation">.</span><span class="token function">insertMany</span><span class="token punctuation">(</span>students<span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;request ended&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">could not update </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>e<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>Let's explore the above code.</p> <p>Firstly you can see that we set up a a variable to hold the connection url (l.5). The number after the colon is the port that database server is listening, 27017 it the default port.</p> <p>Notice how we pre-append the keyword async to our http handler function (l.9). For now, just appreciate that we need to do this so we can, at a later point in the function, use await (l.22 &amp; l.25)</p> <p>Next, in the handler function, we are connecting to MongoDB and selecting the student database (l.23 - l.24). We then select the collection students and insert our students records in bulk (l.24 - l.25).</p> <h2 id="task-2-implement-the-sample-applications"><a href="#task-2-implement-the-sample-applications" class="header-anchor">#</a> Task 2 Implement the Sample Applications</h2> <p>Implement the above two samples for yourself. Type in the code, as you go along review the sections of the <a href="https://nodejs.org/en/docs/" target="_blank" rel="noopener noreferrer">node<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="https://docs.mongodb.com/" target="_blank" rel="noopener noreferrer">https://docs.mongodb.com/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> documentation that relate to the code that we are typing in.</p> <h2 id="guided-learning"><a href="#guided-learning" class="header-anchor">#</a> Guided Learning</h2> <ul><li>When you get home, set up a your own development environment.</li> <li><a href="https://www.mongodb.com/developer/quickstart/node-crud-tutorial/" target="_blank" rel="noopener noreferrer">Can you play around with our student database and add some further operations<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="documentation"><a href="#documentation" class="header-anchor">#</a> Documentation</h3> <p><a href="https://devdocs.io/node/fs#fs_fspromises_readfile_path_options" target="_blank" rel="noopener noreferrer">A more readable version of the node docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://nodejs.org/en/docs/guides/anatomy-of-an-http-transaction/" target="_blank" rel="noopener noreferrer">An interesting and quick read about NodeJS HTTP handling. We will use this protocol heavily throughout this module. <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://docs.mongodb.com/manual/reference/mongo-shell/#command-line-options" target="_blank" rel="noopener noreferrer">A guide to some of the commands you can run in the MongoDB Shell<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="academic"><a href="#academic" class="header-anchor">#</a> Academic</h3> <p><a href="https://www.diva-portal.org/smash/get/diva2:1199667/FULLTEXT02.pdf" target="_blank" rel="noopener noreferrer">A interesting masters paper exploring the performance of different types of databases<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://faculty.washington.edu/wlloyd/courses/tcss562/papers/Spring2017/team7_NOSQL_DB/Survey%20on%20NoSQL%20Database.pdf" target="_blank" rel="noopener noreferrer">A survey of NoSQL databases, categorising them by CAP theorem. If you are interested in the theoretical constraints of distributed database systems, then give this a read<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/advanced-database-systems-2022/sessions/week_1/lecture.html" class="prev">
        Lecture (Start Here)
      </a></span> <span class="next"><a href="/advanced-database-systems-2022/sessions/week_2/lecture.html">
        Lecture (Start Here)
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/advanced-database-systems-2022/assets/js/app.cd8f677f.js" defer></script><script src="/advanced-database-systems-2022/assets/js/2.e8c6d7ef.js" defer></script><script src="/advanced-database-systems-2022/assets/js/13.a85c1a2a.js" defer></script>
  </body>
</html>
